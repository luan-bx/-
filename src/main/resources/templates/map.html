<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="description" content="Creative - Bootstrap 3 Responsive Admin Template">
    <meta name="author" content="GeeksLabs">
    <meta name="keyword" content="Creative, Dashboard, Admin, Template, Theme, Bootstrap, Responsive, Retina, Minimal">
    <link rel="shortcut icon" th:href="@{/img/favicon.png">

    <title>Blank | Creative - Bootstrap 3 Responsive Admin Template</title>

    <!-- Bootstrap CSS -->    
    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet">
    <!-- bootstrap theme -->
    <link th:href="@{/css/bootstrap-theme.css}" rel="stylesheet">
    <!--external css-->
    <!-- font icon -->
    <link th:href="@{/css/elegant-icons-style.css}" rel="stylesheet" />
    <link th:href="@{/css/font-awesome.min.css}" rel="stylesheet" />
    <!-- Custom styles -->
    <link th:href="@{/css/style.css}" rel="stylesheet">
    <link th:href="@{/css/mystyle.css}" rel="stylesheet">
    <link th:href="@{/css/style-responsive.css}" rel="stylesheet" />



    <!--leaflet-velocity-->
    <link rel="stylesheet" th:href="@{/css/leaflet-velocity.css}" />
    <script src="js/leaflet-velocity.js}"></script>

    <!--demo-->
    <link rel="stylesheet" th:href="@{/css/demo.css}" />
    <script src="js/demo.js}"></script>


    <style type="text/css">
        div.panel-success{
            margin-bottom: 0px;
        }
        div.panel-content{
            padding-bottom: 0px;
        }

    </style>
    <style type="text/css">  
        html{height:100%}  
        body{height:100%;margin:0px;padding:0px}  
        #map{height:100%}
    </style>  
    
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.js}"></script>
      <script src="js/respond.min.js}"></script>
      <script src="js/lte-ie7.js}"></script>
    <![endif]-->
  </head>

  <body>
  <!-- container section start -->
  	<div id="map">
  	</div>
    <!-- javascripts -->
    <script src="js/jquery.js}"></script>
    <script src="js/jquery-1.8.3.min.js}"></script>
    <script src="js/bootstrap.min.js}"></script>
    <!-- nice scroll -->
    <script src="js/jquery.scrollTo.min.js}"></script>
    <script src="js/jquery.nicescroll.js}" type="text/javascript"></script><!--custome script for all page-->
    <script src="js/scripts.js}"></script>
    <script src="js/videoMonitor.js}" type="text/javascript"></script>
    <script type="text/javascript" src="https://api.map.baidu.com/api?v=1.0&&type=webgl&ak=0aPMqqDHBDKh15QiIlIh42zpNy2j3vHn"></script>






    <script type="text/javascript">
    	function addMarker(x,y,title,context,name){
    		/**
    		  *参数介绍：
    		  *x:监测点的百度地图经度
    		  *y:监测点的百度地图纬度
    		  *title：信息窗口的标题
    		  *context：信息窗口的文本
    		  *name：监测点名称
    		  */
    		
    		//画点
    		var point = new BMapGL.Point(x, y);   
    		var marker = new BMapGL.Marker(point);        // 创建标注   
            var opts = {
                        width: 280,     // 信息窗口宽度
                        height: 120,    // 信息窗口高度
                        title: title  // 信息窗口标题
                    }
            var infoWindow = new BMapGL.InfoWindow(context, opts);  // 创建信息窗口对象
            infoWindow.enableAutoPan();
    		marker.addEventListener("click", function(){   //信息窗口
    			//信息窗口
                infoWindow.setContent(context+"<br>风向：顺时针"+Math.floor(360*Math.random())+"°");
                    var timer = setInterval(function(){
                        var random = 360*Math.random()
                        var randomInt = Math.floor(random);
                        infoWindow.setContent(context+"<br>风向：顺时针"+randomInt+"°");
                        console.log(random);
                        console.log(randomInt);
                    },2000);
                    infoWindow.addEventListener("close",function(){
                        clearInterval(timer);
                    });
                    map.openInfoWindow(infoWindow,point);
    		});
    		map.addOverlay(marker);                     // 将标注添加到地图中
    		
    		var label = new BMapGL.Label(name, {       // 创建文本标注
    		    position: point,                          // 设置标注的地理位置
    		    offset: new BMapGL.Size(10, -20)           // 设置标注的偏移量
    		})  
    		map.addOverlay(label);   
    	}
    </script>
    <script type="text/javascript">
    	//绘制地图
   		 var map = new BMapGL.Map("map");
   		var point = new BMapGL.Point(118.786587, 32.005283);
   		map.centerAndZoom(point, 15); 
   		map.enableScrollWheelZoom(true);
   		
   	 addMarker( 118.787377, 32.005283, "监测点1", "所属公司：某某某公司"+"<br>监测数据：烟气流速(m/s)"+"<br>数据标准：8.2(m/s)"+"<br>实时参数：7.3(m/s)", '雨花台监测点');
     addMarker( 118.798624, 32.023929, "监测点2", "所属公司：某某某公司"+"<br>监测数据：SO2(mg/m3)"+"<br>数据标准：9.810(mg/m3)"+"<br>实时参数：7.312(mg/m3)", '夫子庙监测点');
     addMarker( 118.794079, 32.018357, "监测点3", "所属公司：某某某公司"+"<br>监测数据：O2(%)"+"<br>数据标准：15.88(%)"+"<br>实时参数：13.79(%)", '老门东监测点');
   		
   		
		
    </script>

  <script th:inline="javascript">
      /*<![CDATA[*/
        var msg = /*[[${msg}]]*/null;
        if(msg!=null){
            alert(msg);
        }
      /*]]>*/
  </script>
</body>
</html>
